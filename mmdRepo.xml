<meta_metadata_repository name="default_repository"
	default_user_agent_name="chrome_2" package="ecologylab.semantics.conceptmapping.generated"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	
	<!--
		NOTE :: Use Lower case characters for all names. XML convention has no
		capital letters for tag names. We follow a similar convention. Any
		upper case chars in the name will cause issues !
	-->
	<!--
		this mmd has been adapted to use with locally hosted of wikipedia
		articles. -yin qu
	-->
	<meta_metadata name="wikipedia_page" extends="document" parser="xpath" url_path_tree="http://achilles/wiki/"
		comment="An article on local wikipedia">
		
		<meta_metadata_field name="title" xpath="//h1[@class='firstHeading']" />
			
		<meta_metadata_field name="outlinks" collection="ArrayList" xpath="//div[@id='bodyContent']/p/a[@title]" child_type="outlink">
			<meta_metadata_field name="surface" scalar_type="String" xpath="string(.)" />
			<meta_metadata_field name="target_concept" scalar_type="String" xpath="./@title" />
		</meta_metadata_field>
		
		<meta_metadata_field name="categories" collection="ArrayList" xpath="//div[@id='mw-normal-catlinks']/span/a" child_type="category">
			<meta_metadata_field name="category" scalar_type="String" xpath="./@title" />
		</meta_metadata_field>

		<semantic_actions>
			<!--
				get_field semantic action brings information from metadata structure
				to current context for use
			-->
			<get_field name="title" />
			<get_field name="location" />
			<create_concept>
			    <arg value="title" name="title" />
			    <arg value="location" name="location" />
			</create_concept>
			
			<get_field name="outlinks" />
			<for_each collection="outlinks" as="outlink">
				<get_field object="outlink" name="surface" />
				<get_field object="outlink" name="target_concept" />
				<add_concept_outlink>
					<arg value="surface" name="surface" />
					<arg value="target_concept" name="target_concept" />
				</add_concept_outlink>
			</for_each>
			
			<get_field name="categories" />
			<for_each collection="categories" as="category">
			    <get_field object="category" name="category" />
			    <add_concept_category>
			        <arg value="category" name="category" />
			    </add_concept_category>
			</for_each>
			
			<finish_concept />
		</semantic_actions>
	</meta_metadata>
	
</meta_metadata_repository>
